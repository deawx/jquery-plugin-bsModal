/*!
 * bsModal.js v1.0.2
 * https://github.com/yangchenshin77/bsModal
 *
 * Copyright 2018 Chen-shin, Yang
 * Released under the MIT license
 *
 * Date: 2018-11-06T05:23:01.180Z
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(o,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(o)),e(t),t}:e(jQuery)}(function(m){var o=m.fn.tooltip.Constructor.VERSION;if(Number(o.substr(0,1))<4)throw"Bootstrap version is not 4";function a(o){var t=void 0;t=0<=o.split(",")[0].indexOf("base64")?atob(o.split(",")[1]):unescape(o.split(",")[1]);for(var e=o.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return new Blob([n],{type:e})}m.fn.bsModal=function(o){var t=this,e={id:"exampleModal",title:"Modal title",titleLavel:5,body:"",label:null,lang:null,modal:null,fade:!0,close:!0,backdrop:!0,confirm:!1,okBtnText:"",cancelBtnText:"",confirmOkText:"",confirmCancelText:"",langs:{},okBtnColor:"primary",cancelBtnColor:"secondary",onOpen:function(){return!0},onClose:function(){return!0},onOk:function(){return!0},onCancel:function(){return!0}},n=m.extend({en:{okBtnText:"Save",cancelBtnText:"Close",confirmOkText:"OK",confirmCancelText:"Cancel"},"zh-TW":{okBtnText:"儲存",cancelBtnText:"關閉",confirmOkText:"確定",confirmCancelText:"取消"}},e.langs),a=n[e.lang]||n[navigator.language||navigator.userLanguage]||n.en;for(var r in a)e[r]=a[r];var l=m.extend({},e,o);l.label=l.label||l.id+"Label",l.confirm&&(l.okBtnText=l.confirmOkText,l.cancelBtnText=l.confirmCancelText,void 0===o.close&&(l.close=!1),void 0===o.backdrop&&(l.backdrop="static"));var i=null;if("string"==typeof l.modal&&(i=m(l.modal)),null===i){i=m('<div class="modal" />').addClass(l.fade?"fade":"").attr({id:l.id,tabindex:"-1",role:"dialog","aria-labelledby":l.label,"data-backdrop":l.backdrop}).appendTo("body");var d=m('<div class="modal-dialog" />').attr({role:"document"}).appendTo(i),c=m('<div class="modal-content" />').appendTo(d),p=m('<div class="modal-header" />').appendTo(c);m("<h"+l.titleLavel+' class="modal-title" />').attr("id",l.label).html(l.title).appendTo(p),l.body&&m('<div class="modal-body" />').html(l.body).appendTo(c);var s=m('<div class="modal-footer" />').appendTo(c);l.close&&m('<button class="close" type="button" data-dismiss="modal" aria-label="Close" />').append(m('<span aria-hidden="true">&times;</span>')).appendTo(p);var u=m('<button type="button" data-dismiss="modal" />').addClass("btn btn-"+l.cancelBtnColor).text(l.cancelBtnText).appendTo(s),f=m('<button type="button" />').addClass("btn btn-"+l.okBtnColor).text(l.okBtnText).appendTo(s);i.on("shown.bs.modal",function(){l.onOpen.call(t)}),i.on("hidden.bs.modal",function(){l.onClose.call(t)}),f.on("click",function(){!1!==l.onOk.call(t)&&i.modal("hide")}),u.on("click",function(){l.onCancel.call(t)})}return this.modal=i,this.attr({"data-toggle":"modal","data-target":"#"+i.attr("id")}),this},m.fn.bsModalCropper=function(o){var l=this;if("undefined"==typeof Cropper)throw"Error: Cropper.js is not found.";var t={id:"exampleModalCropper",confirm:!0,src:null,imgId:"exampleImage",cropper:{viewMode:1},maxWidth:null,maxHeight:null,action:null,method:"post",fileName:"file",data:{},uploadConfig:{allowTypes:["image/jpeg","image/png"],maxSize:5*Math.pow(1024,2)},success:function(){},error:function(){},axios:null,axiosOriginalData:!1,onUpload:function(){return!0},onUploadError:function(){return!0},onCropper:function(){return!0}},i=m.extend({},t,o);i.cropper=m.extend({},t.cropper,o.cropper),i.uploadConfig=m.extend({},t.uploadConfig,o.uploadConfig);var d=m("<img />").attr("id",i.imgId).css("max-width","100%"),e=void 0;if(i.body=m('<div class="img-container" />').append(d),i.onOpen=function(){e=new Cropper(d.get(0),i.cropper)},i.onOk=function(){var o=e.getCroppedCanvas().toDataURL();e.destroy(),function(o,i,d){if(null===i.width&&null===i.height&&d)return d(o);var c="",p=document.createElement("canvas"),s=p.getContext("2d"),u=new Image;u.src=o,u.onload=function(){var o,t,e,n,a=u.width,r=u.height,l=(o=a,t=r,e=i.width,n=i.height,Math.min(e/o,n/t));p.width=a*l,p.height=r*l,s.drawImage(u,0,0,a,r,0,0,a*l,r*l),c=p.toDataURL(),d&&d(c)}}(o,{width:i.maxWidth,height:i.maxHeight},function(o){if(i.onCropper.call(l,o,a(o)),"string"==typeof i.action){var t=a(o),e=new FormData;e.append(i.fileName,t);var n=Object.keys(i.data);n.length&&n.forEach(function(o){e.append(o,i.data[o])}),function(t,o){if(t.axios)t.axios({url:t.action,method:t.method,data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(o){t.success(t.axiosOriginalData?o:o.data)}).catch(t.error);else{if(void 0===m.ajax)throw"Error: ajax function is not found, Can't upload image.";m.ajax(t.action,{method:t.method,data:o,processData:!1,contentType:!1,success:t.success,error:t.error})}}(i,e)}})},i.onCancel=function(){e.destroy()},i.src)d.attr("src",i.src),this.bsModal(i);else{var c=this.children("input[type=file]").get(0);c.onchange=function(){if(c.files.length){var t=c.files[0];if(!1!==i.onUpload.call(l)){var o,e,n;if(i.uploadConfig.allowTypes)if(!i.uploadConfig.allowTypes.some(function(o){return o===t.type}))return void i.onUploadError.call(l,"Upload file type is wrong");if(i.uploadConfig.maxSize){var a=i.uploadConfig.maxSize;if(t.size>a){var r=void 0;return a<1024?r=a+" B":a>=Math.pow(1024,1)&&a<Math.pow(1024,2)?r=Math.floor(a/Math.pow(1024,1))+" KB":a>=Math.pow(1024,2)&&a<Math.pow(1024,3)&&(r=Math.floor(a/Math.pow(1024,2))+" MB"),void i.onUploadError.call(l,"Uploaded file cannot be larger than "+r)}}o=t,e=function(o){i.src=o,d.attr("src",i.src),l.bsModal(i),l.modal.modal("show"),l.removeAttr("data-toggle").removeAttr("data-target")},(n=new FileReader).onload=function(o){e(o.target.result)},n.readAsDataURL(o)}}}}return this}});