/*!
 * bsModal.js v1.0.0-rc.1
 * https://github.com/yangchenshin77/bsModal
 *
 * Copyright 2018 Chen-shin, Yang
 * Released under the MIT license
 *
 * Date: 2018-11-03T08:48:22.976Z
 */
!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),o(e),e}:o(jQuery)}(function(m){var t=m.fn.tooltip.Constructor.VERSION;if(Number(t.substr(0,1))<4)throw"Bootstrap version is not 4";function i(t){var e;e=0<=t.split(",")[0].indexOf("base64")?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var o=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return new Blob([n],{type:o})}m.fn.bsModal=function(t){var e={id:"exampleModal",title:"Modal title",titleLavel:5,body:"",label:null,lang:null,modal:null,fade:!0,close:!0,backdrop:!0,confirm:!1,okBtnText:"",cancelBtnText:"",confirmOkText:"",confirmCancelText:"",langs:{},okBtnColor:"primary",cancelBtnColor:"secondary",onOpen:function(){},onClose:function(){},onOk:function(){},onCancel:function(){}},o=navigator.language||navigator.userLanguage,n=m.extend({en:{okBtnText:"Save",cancelBtnText:"Close",confirmOkText:"OK",confirmCancelText:"Cancel"},"zh-TW":{okBtnText:"儲存",cancelBtnText:"關閉",confirmOkText:"確定",confirmCancelText:"取消"}},e.langs),a=n[e.lang]||n[o]||n.en;for(var i in a)e[i]=a[i];var r=m.extend({},e,t);r.label=r.label||r.id+"Label",r.confirm&&(r.okBtnText=r.confirmOkText,r.cancelBtnText=r.confirmCancelText,void 0===t.close&&(r.close=!1),void 0===t.backdrop&&(r.backdrop="static"));var l=null;if("string"==typeof r.modal&&(l=m(r.modal)),null===l){l=m('<div class="modal" />').addClass(r.fade?"fade":"").attr({id:r.id,tabindex:"-1",role:"dialog","aria-labelledby":r.label,"data-backdrop":r.backdrop}).appendTo("body");var d=m('<div class="modal-dialog" />').attr({role:"document"}).appendTo(l),c=m('<div class="modal-content" />').appendTo(d),s=m('<div class="modal-header" />').appendTo(c);if(m("<h"+r.titleLavel+' class="modal-title" />').attr("id",r.label).text(r.title).appendTo(s),r.body)m('<div class="modal-body" />').html(r.body).appendTo(c);var p=m('<div class="modal-footer" />').appendTo(c);r.close&&m('<button class="close" type="button" data-dismiss="modal" aria-label="Close" />').append(m('<span aria-hidden="true">&times;</span>')).appendTo(s);var u=m('<button type="button" data-dismiss="modal" />').addClass("btn btn-"+r.cancelBtnColor).text(r.cancelBtnText).appendTo(p),f=m('<button type="button" />').addClass("btn btn-"+r.okBtnColor).text(r.okBtnText).appendTo(p);l.on("shown.bs.modal",function(){r.onOpen.call(this)}),l.on("hidden.bs.modal",function(){r.onClose.call(this)}),f.on("click",function(){!1!==r.onOk.call(this)&&l.modal("hide")}),u.on("click",function(){r.onCancel.call(this)})}return this.attr({"data-toggle":"modal","data-target":"#"+l.attr("id")}),this},m.fn.bsModalCropper=function(t){var e={id:"exampleModalCropper",confirm:!0,src:"",imgId:"exampleImage",cropper:{viewMode:1},action:null,method:"post",fileName:"file",success:function(){},error:function(){},axios:null,axiosOriginalData:!1,onCropper:function(){}},n=m.extend({},e,t);if(n.cropper=m.extend({},e.cropper,t.cropper),"undefined"==typeof Cropper)throw"Error: Cropper.js is not found.";var o,a=m("<img />").attr({id:n.imgId,src:n.src}).css("max-width","100%").get(0);return n.body=m('<div class="img-container" />').html(a),n.onOpen=function(){o=new Cropper(a,n.cropper)},n.onOk=function(){var t=o.getCroppedCanvas().toDataURL();o.destroy(),function(t,l,d){if(void 0===l.width&&void 0===l.height&&d)return d(t);var c="",s=document.createElement("canvas"),p=s.getContext("2d"),u=new Image;u.src=t,u.onload=function(){var t,e,o,n,a=u.width,i=u.height,r=(t=a,e=i,o=l.width,n=l.height,Math.min(o/t,n/e));s.width=a*r,s.height=i*r,p.drawImage(u,0,0,a,i,0,0,a*r,i*r),c=s.toDataURL(),d&&d(c)}}(t,{width:n.maxWidth,height:n.maxHeight},function(t){if(function(t,e){n.onCropper.call(this,t,e)}(t,i(t)),"string"==typeof n.action){var e=i(t),o=new FormData;o.append(n.fileName,e),function(e,t){if(e.axios)e.axios({url:e.action,method:e.method,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.success(e.axiosOriginalData?t:t.data)}).catch(e.error);else{if(void 0===m.ajax)throw"Error: ajax function is not found, Can't upload image.";m.ajax(e.action,{method:e.method,data:t,processData:!1,contentType:!1,success:e.success,error:e.error})}}(n,o)}})},n.onCancel=function(){o.destroy()},this.bsModal(n),this}});